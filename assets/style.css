/* Theme tokens */
:root {
  --brand-600: #2e7d32;
  --bg: #f7f9fc;
  --card: #fff;
  --text: #1b1f24;
  --muted: #616161;
  --border: #e2e8f0;
  --border-2: #cbd5e1;
  --shadow: 0 4px 6px rgba(0,0,0,.08);
  --gap: 12px;
}

/* Resets & base */
* { box-sizing: border-box; }
html, body, .app-root { height: 100%; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, Helvetica, sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.45;
}
#_dash-app-content { padding: 16px; }

/* Header */
.app-header {
  background: var(--brand-600);
  color: #fff;
  padding: 16px;
  margin-bottom: 12px;
  text-align: center;
}
.app-header h1 { margin: 0; font-size: 1.5rem; }

/* Upload */
.upload {
  padding: 12px;
  margin-bottom: 8px;
}
.upload-btn {
  appearance: none;
  cursor: pointer;
  border: 1px solid var(--border-2);
  background: #fff;
  color: #0f172a;
  padding: 10px 12px;
  border-radius: 8px;
  font-weight: 600;
  transition: border-color .15s ease, transform .05s ease;
}
.upload-btn:hover { border-color: #94a3b8; }
.upload-btn:active { transform: translateY(1px); }

/* Dropdowns (react-select used by Dash) */
.Select-control,
.Select--single > .Select-control {
  border-radius: 8px;
  border: 1px solid var(--border-2);
  min-height: 38px;
}
.Select-control:hover { border-color: #94a3b8; }
.is-focused:not(.is-open) > .Select-control {
  border-color: #334155;
  box-shadow: 0 0 0 2px rgba(51,65,85,.15);
}
.Select-placeholder, .Select-value-label { color: #334155; margin: 2px; }

/* Category browser */
.category-dropdown { margin: 8px 0; max-width: 260px; }
.columns-list {
  margin: 8px 0 16px;
  padding: 8px 12px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 8px;
  max-height: 300px;
  max-width: 280px;
  overflow: auto;
}
.columns-list ul { margin: 0; padding-left: 18px; }
.columns-list li { padding: 2px 0; }

/* Column picker */
.column-picker { margin-bottom: 16px; }

/* Visualisation controls */
.vis-controls {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: var(--gap);
  margin-top: 8px;
}
.vis-controls .Select { margin-bottom: 0; }

/* Charts layout */
.charts-grid {
  display: grid;
  gap: var(--gap);
  grid-template-columns: repeat(3, minmax(260px, 1fr));
  align-items: start;
  overflow-x: hidden;
}

/* Make the map card span the full row */
.charts-grid .map-card {
  grid-column: 1 / -1; 
}

/* Each chart "card" (the grid-item wrapper) */
.chart-card {
  background: var(--card);
  border: 1px solid var(--border); 
  border-radius: 10px;
  padding: 6px;
  box-shadow:0 1px 2px rgba(2,6,23,0.04);
  min-width: 0;
}

/* Plot inside each card */
.chart-plot{
  height: 420px; 
  width: 100%;
  min-width: 0; 
}

.chart-plot .dash-graph,
.chart-plot .js-plotly-plot,
.chart-plot .plot-container{
  height: 100% !important;
  width: 100% !important;
}

/* Small control strip placed above a chart */
.chart-controls {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--gap);
  margin: 6px 0 4px;
}
.chart-controls .Select { margin-bottom: 0; }

/* Responsiveness */
@media (max-width: 1199px){
  .charts-grid{ grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 899px){
  .charts-grid{ grid-template-columns: 1fr; }
}
